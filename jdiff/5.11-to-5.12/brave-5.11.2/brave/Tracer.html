<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (13.0.2) on Mon Apr 06 06:03:21 UTC 2020 -->
<title>Tracer (Brave 5.11.2 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2020-04-06">
<meta name="description" content="declaration: package: brave, class: Tracer">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
<script type="text/javascript" src="../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":42,"i15":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Tracer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<a id="skip.navbar.top">
<!--   -->
</a>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">brave</a></div>
<h1 title="Class Tracer" class="title">Class Tracer</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a>
<div class="inheritance">brave.Tracer</div>
</div>
<section class="description">
<hr>
<pre>public class <span class="typeNameLabel">Tracer</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></pre>
<div class="block">Using a tracer, you can create a root span capturing the critical path of a request. Child spans
 can be created to allocate latency relating to outgoing requests.

 When tracing single-threaded code, just run it inside a scoped span:
 <pre><code>
 // Start a new trace or a span within an existing trace representing an operation
 ScopedSpan span = tracer.startScopedSpan("encode");
 try {
   // The span is in "scope" so that downstream code such as loggers can see trace IDs
   return encoder.encode();
 } catch (RuntimeException | Error e) {
   span.error(e); // Unless you handle exceptions, you might not know the operation failed!
   throw e;
 } finally {
   span.finish();
 }
 </code></pre>

 <p>When you need more features, or finer control, use the <a href="Span.html" title="class in brave">Span</a> type:
 <pre><code>
 // Start a new trace or a span within an existing trace representing an operation
 Span span = tracer.nextSpan().name("encode").start();
 // Put the span in "scope" so that downstream code such as loggers can see trace IDs
 try (SpanInScope ws = tracer.withSpanInScope(span)) {
   return encoder.encode();
 } catch (RuntimeException | Error e) {
   span.error(e); // Unless you handle exceptions, you might not know the operation failed!
   throw e;
 } finally {
   span.finish(); // note the scope is independent of the span. Always finish a span.
 }
 </code></pre>

 <p>Both of the above examples report the exact same span on finish!</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="Span.html" title="class in brave"><code>Span</code></a>, 
<a href="ScopedSpan.html" title="class in brave"><code>ScopedSpan</code></a>, 
<a href="propagation/Propagation.html" title="interface in brave.propagation"><code>Propagation</code></a></dd>
</dl>
</section>
<section class="summary">
<ul class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li class="blockList">
<section class="nestedClassSummary"><a id="nested.class.summary">
<!--   -->
</a>
<h2>Nested Class Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="Tracer.SpanInScope.html" title="class in brave">Tracer.SpanInScope</a></span></code></th>
<td class="colLast">
<div class="block">A span remains in the scope it was bound to until close is called.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t6" class="tableTab" onclick="show(32);">Deprecated Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code><a href="Span.html" title="class in brave">Span</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#currentSpan()">currentSpan</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the current span in scope or null if there isn't one.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code><a href="SpanCustomizer.html" title="interface in brave">SpanCustomizer</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#currentSpanCustomizer()">currentSpanCustomizer</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns a customizer for current span in scope or noop if there isn't one.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code><a href="Span.html" title="class in brave">Span</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#joinSpan(brave.propagation.TraceContext)">joinSpan</a></span>&#8203;(<a href="propagation/TraceContext.html" title="class in brave.propagation">TraceContext</a>&nbsp;context)</code></th>
<td class="colLast">
<div class="block">Joining is re-using the same trace and span ids extracted from an incoming RPC request.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code><a href="Span.html" title="class in brave">Span</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#newChild(brave.propagation.TraceContext)">newChild</a></span>&#8203;(<a href="propagation/TraceContext.html" title="class in brave.propagation">TraceContext</a>&nbsp;parent)</code></th>
<td class="colLast">
<div class="block">Explicitly creates a child within an existing trace.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code><a href="Span.html" title="class in brave">Span</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#newTrace()">newTrace</a></span>()</code></th>
<td class="colLast">
<div class="block">Explicitly creates a new trace.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code><a href="Span.html" title="class in brave">Span</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#nextSpan()">nextSpan</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns a new child span if there's a <a href="#currentSpan()"><code>currentSpan()</code></a> or a new trace if there isn't.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code><a href="Span.html" title="class in brave">Span</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#nextSpan(brave.propagation.TraceContextOrSamplingFlags)">nextSpan</a></span>&#8203;(<a href="propagation/TraceContextOrSamplingFlags.html" title="class in brave.propagation">TraceContextOrSamplingFlags</a>&nbsp;extracted)</code></th>
<td class="colLast">
<div class="block">This creates a new span based on parameters extracted from an incoming request.</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>&lt;T&gt;&nbsp;<a href="Span.html" title="class in brave">Span</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#nextSpan(brave.sampler.SamplerFunction,T)">nextSpan</a></span>&#8203;(<a href="sampler/SamplerFunction.html" title="interface in brave.sampler">SamplerFunction</a>&lt;T&gt;&nbsp;samplerFunction,
T&nbsp;arg)</code></th>
<td class="colLast">
<div class="block">Like <a href="#nextSpan()"><code>nextSpan()</code></a> except when there is no trace in process, the sampler <a href="sampler/SamplerFunction.html#trySample(T)"><code>triggers</code></a> against the supplied argument.</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>&lt;T&gt;&nbsp;<a href="Span.html" title="class in brave">Span</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#nextSpanWithParent(brave.sampler.SamplerFunction,T,brave.propagation.TraceContext)">nextSpanWithParent</a></span>&#8203;(<a href="sampler/SamplerFunction.html" title="interface in brave.sampler">SamplerFunction</a>&lt;T&gt;&nbsp;samplerFunction,
T&nbsp;arg,
<a href="propagation/TraceContext.html" title="class in brave.propagation">TraceContext</a>&nbsp;parent)</code></th>
<td class="colLast">
<div class="block">Like <a href="#nextSpan(brave.sampler.SamplerFunction,T)"><code>nextSpan(SamplerFunction, Object)</code></a> except this controls the parent context
 explicitly.</div>
</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code><a href="ScopedSpan.html" title="class in brave">ScopedSpan</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#startScopedSpan(java.lang.String)">startScopedSpan</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;name)</code></th>
<td class="colLast">
<div class="block">Returns a new child span if there's a <a href="#currentSpan()"><code>currentSpan()</code></a> or a new trace if there isn't.</div>
</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>&lt;T&gt;&nbsp;<a href="ScopedSpan.html" title="class in brave">ScopedSpan</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#startScopedSpan(java.lang.String,brave.sampler.SamplerFunction,T)">startScopedSpan</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;name,
<a href="sampler/SamplerFunction.html" title="interface in brave.sampler">SamplerFunction</a>&lt;T&gt;&nbsp;samplerFunction,
T&nbsp;arg)</code></th>
<td class="colLast">
<div class="block">Like <a href="#startScopedSpan(java.lang.String)"><code>startScopedSpan(String)</code></a> except when there is no trace in process, the sampler
 <a href="sampler/SamplerFunction.html#trySample(T)"><code>triggers</code></a> against the supplied argument.</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code><a href="ScopedSpan.html" title="class in brave">ScopedSpan</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#startScopedSpanWithParent(java.lang.String,brave.propagation.TraceContext)">startScopedSpanWithParent</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;name,
<a href="propagation/TraceContext.html" title="class in brave.propagation">TraceContext</a>&nbsp;parent)</code></th>
<td class="colLast">
<div class="block">Same as <a href="#startScopedSpan(java.lang.String)"><code>startScopedSpan(String)</code></a>, except ignores the current trace context.</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code><a href="Span.html" title="class in brave">Span</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toSpan(brave.propagation.TraceContext)">toSpan</a></span>&#8203;(<a href="propagation/TraceContext.html" title="class in brave.propagation">TraceContext</a>&nbsp;context)</code></th>
<td class="colLast">
<div class="block">Converts the context to a Span object after decorating it for propagation</div>
</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toString()">toString</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i14">
<td class="colFirst"><code><a href="Tracer.html" title="class in brave">Tracer</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#withSampler(brave.sampler.Sampler)">withSampler</a></span>&#8203;(<a href="sampler/Sampler.html" title="class in brave.sampler">Sampler</a>&nbsp;sampler)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Since 5.8, use <a href="#nextSpan(brave.sampler.SamplerFunction,T)"><code>nextSpan(SamplerFunction, Object)</code></a>  or <a href="#startScopedSpan(java.lang.String,brave.sampler.SamplerFunction,T)"><code>startScopedSpan(String, SamplerFunction, Object)</code></a></div>
</div>
</td>
</tr>
<tr class="rowColor" id="i15">
<td class="colFirst"><code><a href="Tracer.SpanInScope.html" title="class in brave">Tracer.SpanInScope</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#withSpanInScope(brave.Span)">withSpanInScope</a></span>&#8203;(<a href="Span.html" title="class in brave">Span</a>&nbsp;span)</code></th>
<td class="colLast">
<div class="block">Makes the given span the "current span" and returns an object that exits that scope on close.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="withSampler(brave.sampler.Sampler)">withSampler</a></h3>
<div class="memberSignature"><span class="annotations"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang" class="externalLink">@Deprecated</a>
</span><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="Tracer.html" title="class in brave">Tracer</a></span>&nbsp;<span class="memberName">withSampler</span>&#8203;(<span class="arguments"><a href="sampler/Sampler.html" title="class in brave.sampler">Sampler</a>&nbsp;sampler)</span></div>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Since 5.8, use <a href="#nextSpan(brave.sampler.SamplerFunction,T)"><code>nextSpan(SamplerFunction, Object)</code></a>  or <a href="#startScopedSpan(java.lang.String,brave.sampler.SamplerFunction,T)"><code>startScopedSpan(String, SamplerFunction, Object)</code></a></div>
</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>4.19</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="newTrace()">newTrace</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="Span.html" title="class in brave">Span</a></span>&nbsp;<span class="memberName">newTrace</span>()</div>
<div class="block">Explicitly creates a new trace. The result will be a root span (no parent span ID).

 <p>To implicitly create a new trace, or a span within an existing one, use <a href="#nextSpan()"><code>nextSpan()</code></a>.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="joinSpan(brave.propagation.TraceContext)">joinSpan</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType"><a href="Span.html" title="class in brave">Span</a></span>&nbsp;<span class="memberName">joinSpan</span>&#8203;(<span class="arguments"><a href="propagation/TraceContext.html" title="class in brave.propagation">TraceContext</a>&nbsp;context)</span></div>
<div class="block">Joining is re-using the same trace and span ids extracted from an incoming RPC request. This
 should not be used for messaging operations, as <a href="#nextSpan(brave.propagation.TraceContextOrSamplingFlags)"><code>nextSpan(TraceContextOrSamplingFlags)</code></a>
 is a better choice.

 <p>When this incoming context is sampled, we assume this is a shared span, one where the
 caller and the current tracer report to the same span IDs. If no sampling decision occurred
 yet, we have exclusive access to this span ID.

 <p>Here's an example of conditionally joining a span, depending on if a trace context was
 extracted from an incoming request.

 <pre><code>
 extracted = extractor.extract(request);
 span = contextOrFlags.context() != null
          ? tracer.joinSpan(contextOrFlags.context())
          : tracer.nextSpan(extracted);
 </code></pre>

 <p><em>Note:</em> When <a href="propagation/Propagation.Factory.html#supportsJoin()"><code>Propagation.Factory.supportsJoin()</code></a> is false, this will always
 fork a new child via <a href="#newChild(brave.propagation.TraceContext)"><code>newChild(TraceContext)</code></a>.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="propagation/Propagation.html" title="interface in brave.propagation"><code>Propagation</code></a>, 
<a href="propagation/TraceContext.Extractor.html#extract(C)"><code>TraceContext.Extractor.extract(Object)</code></a>, 
<a href="propagation/TraceContextOrSamplingFlags.html#context()"><code>TraceContextOrSamplingFlags.context()</code></a>, 
<a href="#nextSpan(brave.propagation.TraceContextOrSamplingFlags)"><code>nextSpan(TraceContextOrSamplingFlags)</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="newChild(brave.propagation.TraceContext)">newChild</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="Span.html" title="class in brave">Span</a></span>&nbsp;<span class="memberName">newChild</span>&#8203;(<span class="arguments"><a href="propagation/TraceContext.html" title="class in brave.propagation">TraceContext</a>&nbsp;parent)</span></div>
<div class="block">Explicitly creates a child within an existing trace. The result will be have its parent ID set
 to the input's span ID. If a sampling decision has not yet been made, one will happen here.

 <p>To implicitly create a new trace, or a span within an existing one, use <a href="#nextSpan()"><code>nextSpan()</code></a>.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="nextSpan(brave.propagation.TraceContextOrSamplingFlags)">nextSpan</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="Span.html" title="class in brave">Span</a></span>&nbsp;<span class="memberName">nextSpan</span>&#8203;(<span class="arguments"><a href="propagation/TraceContextOrSamplingFlags.html" title="class in brave.propagation">TraceContextOrSamplingFlags</a>&nbsp;extracted)</span></div>
<div class="block">This creates a new span based on parameters extracted from an incoming request. This will
 always result in a new span. If no trace identifiers were extracted, a span will be created
 based on the implicit context in the same manner as <a href="#nextSpan()"><code>nextSpan()</code></a>. If a sampling decision
 has not yet been made, one will happen here.

 <p>Ex.
 <pre><code>
 extracted = extractor.extract(request);
 span = tracer.nextSpan(extracted);
 </code></pre>

 <p><em>Note:</em> Unlike <a href="#joinSpan(brave.propagation.TraceContext)"><code>joinSpan(TraceContext)</code></a>, this does not attempt to re-use
 extracted span IDs. This means the extracted context (if any) is the parent of the span
 returned.

 <p><em>Note:</em> If a context could be extracted from the input, that trace is resumed, not
 whatever the <a href="#currentSpan()"><code>currentSpan()</code></a> was. Make sure you re-apply <a href="#withSpanInScope(brave.Span)"><code>withSpanInScope(Span)</code></a>
 so that data is written to the correct trace.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="propagation/Propagation.html" title="interface in brave.propagation"><code>Propagation</code></a>, 
<a href="propagation/TraceContext.Extractor.html#extract(C)"><code>TraceContext.Extractor.extract(Object)</code></a>, 
<a href="#nextSpan(brave.sampler.SamplerFunction,T)"><code>nextSpan(SamplerFunction, Object)</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="toSpan(brave.propagation.TraceContext)">toSpan</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="Span.html" title="class in brave">Span</a></span>&nbsp;<span class="memberName">toSpan</span>&#8203;(<span class="arguments"><a href="propagation/TraceContext.html" title="class in brave.propagation">TraceContext</a>&nbsp;context)</span></div>
<div class="block">Converts the context to a Span object after decorating it for propagation</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="withSpanInScope(brave.Span)">withSpanInScope</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="Tracer.SpanInScope.html" title="class in brave">Tracer.SpanInScope</a></span>&nbsp;<span class="memberName">withSpanInScope</span>&#8203;(<span class="arguments">@Nullable
<a href="Span.html" title="class in brave">Span</a>&nbsp;span)</span></div>
<div class="block">Makes the given span the "current span" and returns an object that exits that scope on close.
 Calls to <a href="#currentSpan()"><code>currentSpan()</code></a> and <a href="#currentSpanCustomizer()"><code>currentSpanCustomizer()</code></a> will affect this span
 until the return value is closed.

 <p>The most convenient way to use this method is via the try-with-resources idiom.

 Ex.
 <pre><code>
 // Assume a framework interceptor uses this method to set the inbound span as current
 try (SpanInScope ws = tracer.withSpanInScope(span)) {
   return inboundRequest.invoke();
 // note: try-with-resources closes the scope *before* the catch block
 } catch (RuntimeException | Error e) {
   span.error(e);
   throw e;
 } finally {
   span.finish();
 }

 // An unrelated framework interceptor can now lookup the correct parent for outbound requests
 Span parent = tracer.currentSpan()
 Span span = tracer.nextSpan().name("outbound").start(); // parent is implicitly looked up
 try (SpanInScope ws = tracer.withSpanInScope(span)) {
   return outboundRequest.invoke();
 // note: try-with-resources closes the scope *before* the catch block
 } catch (RuntimeException | Error e) {
   span.error(e);
   throw e;
 } finally {
   span.finish();
 }
 </code></pre>

 <p>When tracing in-process commands, prefer <a href="#startScopedSpan(java.lang.String)"><code>startScopedSpan(String)</code></a> which scopes by
 default.

 <p>Note: While downstream code might affect the span, calling this method, and calling close
 on the result have no effect on the input. For example, calling close on the result does not
 finish the span. Not only is it safe to call close, you must call close to end the scope, or
 risk leaking resources associated with the scope.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>span</code> - span to place into scope or null to clear the scope</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="currentSpanCustomizer()">currentSpanCustomizer</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="SpanCustomizer.html" title="interface in brave">SpanCustomizer</a></span>&nbsp;<span class="memberName">currentSpanCustomizer</span>()</div>
<div class="block">Returns a customizer for current span in scope or noop if there isn't one.

 <p>Unlike <a href="CurrentSpanCustomizer.html" title="class in brave"><code>CurrentSpanCustomizer</code></a>, this represents a single span. Accordingly, this
 reference should not be saved as a field. That said, it is more efficient to save this result
 as a method-local variable vs repeated calls.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="currentSpan()">currentSpan</a></h3>
<div class="memberSignature"><span class="annotations">@Nullable
</span><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="Span.html" title="class in brave">Span</a></span>&nbsp;<span class="memberName">currentSpan</span>()</div>
<div class="block">Returns the current span in scope or null if there isn't one.

 <p>When entering user code, prefer <a href="#currentSpanCustomizer()"><code>currentSpanCustomizer()</code></a> as it is a stable type and
 will never return null.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="nextSpan()">nextSpan</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="Span.html" title="class in brave">Span</a></span>&nbsp;<span class="memberName">nextSpan</span>()</div>
<div class="block">Returns a new child span if there's a <a href="#currentSpan()"><code>currentSpan()</code></a> or a new trace if there isn't.

 <p>Prefer <a href="#startScopedSpan(java.lang.String)"><code>startScopedSpan(String)</code></a> if you are tracing a synchronous function or code
 block.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="startScopedSpan(java.lang.String)">startScopedSpan</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="ScopedSpan.html" title="class in brave">ScopedSpan</a></span>&nbsp;<span class="memberName">startScopedSpan</span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;name)</span></div>
<div class="block">Returns a new child span if there's a <a href="#currentSpan()"><code>currentSpan()</code></a> or a new trace if there isn't. The
 result is the "current span" until <a href="ScopedSpan.html#finish()"><code>ScopedSpan.finish()</code></a> is called.

 Here's an example:
 <pre><code>
 ScopedSpan span = tracer.startScopedSpan("encode");
 try {
   // The span is in "scope" so that downstream code such as loggers can see trace IDs
   return encoder.encode();
 } catch (RuntimeException | Error e) {
   span.error(e); // Unless you handle exceptions, you might not know the operation failed!
   throw e;
 } finally {
   span.finish();
 }
 </code></pre></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="startScopedSpan(java.lang.String,brave.sampler.SamplerFunction,java.lang.Object)">
<!--   -->
</a><a id="startScopedSpan(java.lang.String,brave.sampler.SamplerFunction,T)">startScopedSpan</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="typeParameters">&lt;T&gt;</span>&nbsp;<span class="returnType"><a href="ScopedSpan.html" title="class in brave">ScopedSpan</a></span>&nbsp;<span class="memberName">startScopedSpan</span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;name,
<a href="sampler/SamplerFunction.html" title="interface in brave.sampler">SamplerFunction</a>&lt;T&gt;&nbsp;samplerFunction,
T&nbsp;arg)</span></div>
<div class="block">Like <a href="#startScopedSpan(java.lang.String)"><code>startScopedSpan(String)</code></a> except when there is no trace in process, the sampler
 <a href="sampler/SamplerFunction.html#trySample(T)"><code>triggers</code></a> against the supplied argument.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - the <a href="Span.html#name(java.lang.String)"><code>span name</code></a></dd>
<dd><code>samplerFunction</code> - invoked if there's no <a href="propagation/CurrentTraceContext.html#get()"><code>current trace</code></a></dd>
<dd><code>arg</code> - parameter to <a href="sampler/SamplerFunction.html#trySample(T)"><code>SamplerFunction.trySample(Object)</code></a></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>5.8</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#nextSpan(brave.sampler.SamplerFunction,T)"><code>nextSpan(SamplerFunction, Object)</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="nextSpan(brave.sampler.SamplerFunction,java.lang.Object)">
<!--   -->
</a><a id="nextSpan(brave.sampler.SamplerFunction,T)">nextSpan</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="typeParameters">&lt;T&gt;</span>&nbsp;<span class="returnType"><a href="Span.html" title="class in brave">Span</a></span>&nbsp;<span class="memberName">nextSpan</span>&#8203;(<span class="arguments"><a href="sampler/SamplerFunction.html" title="interface in brave.sampler">SamplerFunction</a>&lt;T&gt;&nbsp;samplerFunction,
T&nbsp;arg)</span></div>
<div class="block">Like <a href="#nextSpan()"><code>nextSpan()</code></a> except when there is no trace in process, the sampler <a href="sampler/SamplerFunction.html#trySample(T)"><code>triggers</code></a> against the supplied argument.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>samplerFunction</code> - invoked if there's no <a href="propagation/CurrentTraceContext.html#get()"><code>current trace</code></a></dd>
<dd><code>arg</code> - parameter to <a href="sampler/SamplerFunction.html#trySample(T)"><code>SamplerFunction.trySample(Object)</code></a></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>5.8</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#startScopedSpan(java.lang.String,brave.sampler.SamplerFunction,T)"><code>startScopedSpan(String, SamplerFunction, Object)</code></a>, 
<a href="#nextSpan(brave.propagation.TraceContextOrSamplingFlags)"><code>nextSpan(TraceContextOrSamplingFlags)</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="nextSpanWithParent(brave.sampler.SamplerFunction,java.lang.Object,brave.propagation.TraceContext)">
<!--   -->
</a><a id="nextSpanWithParent(brave.sampler.SamplerFunction,T,brave.propagation.TraceContext)">nextSpanWithParent</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="typeParameters">&lt;T&gt;</span>&nbsp;<span class="returnType"><a href="Span.html" title="class in brave">Span</a></span>&nbsp;<span class="memberName">nextSpanWithParent</span>&#8203;(<span class="arguments"><a href="sampler/SamplerFunction.html" title="interface in brave.sampler">SamplerFunction</a>&lt;T&gt;&nbsp;samplerFunction,
T&nbsp;arg,
@Nullable
<a href="propagation/TraceContext.html" title="class in brave.propagation">TraceContext</a>&nbsp;parent)</span></div>
<div class="block">Like <a href="#nextSpan(brave.sampler.SamplerFunction,T)"><code>nextSpan(SamplerFunction, Object)</code></a> except this controls the parent context
 explicitly. This is useful when an invocation context is propagated manually, commonly
 the case with asynchronous client frameworks.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>samplerFunction</code> - invoked if there's no <a href="propagation/CurrentTraceContext.html#get()"><code>current trace</code></a></dd>
<dd><code>arg</code> - parameter to <a href="sampler/SamplerFunction.html#trySample(T)"><code>SamplerFunction.trySample(Object)</code></a></dd>
<dd><code>parent</code> - of the new span, or <code>null</code> if it should have no parent</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>5.10</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#nextSpan(brave.sampler.SamplerFunction,T)"><code>nextSpan(SamplerFunction, Object)</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="startScopedSpanWithParent(java.lang.String,brave.propagation.TraceContext)">startScopedSpanWithParent</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="ScopedSpan.html" title="class in brave">ScopedSpan</a></span>&nbsp;<span class="memberName">startScopedSpanWithParent</span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;name,
@Nullable
<a href="propagation/TraceContext.html" title="class in brave.propagation">TraceContext</a>&nbsp;parent)</span></div>
<div class="block">Same as <a href="#startScopedSpan(java.lang.String)"><code>startScopedSpan(String)</code></a>, except ignores the current trace context.

 <p>Use this when you are creating a scoped span in a method block where the parent was
 created. You can also use this to force a new trace by passing null parent.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="toString()">toString</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></span>&nbsp;<span class="memberName">toString</span>()</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Tracer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2013&#x2013;2020 <a href="https://zipkin.io/">OpenZipkin</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
