<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.2) on Fri Oct 18 15:03:06 UTC 2019 -->
<title>CollectorMetrics (Collector: Core Library 2.18.2 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2019-10-18">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CollectorMetrics (Collector: Core Library 2.18.2 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CollectorMetrics.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">zipkin2.collector</a></div>
<h2 title="Interface CollectorMetrics" class="title">Interface CollectorMetrics</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="InMemoryCollectorMetrics.html" title="class in zipkin2.collector">InMemoryCollectorMetrics</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">CollectorMetrics</span></pre>
<div class="block">Instrumented applications report spans over a transport such as Kafka. Zipkin collectors receive
 these messages, <a href="https://github.com/openzipkin/zipkin/zipkin/apidocs/zipkin2/codec/BytesDecoder.html?is-external=true#decode(byte%5B%5D,java.util.Collection)" title="class or interface in zipkin2.codec" class="externalLink"><code>decoding them into spans</code></a>,
 <a href="CollectorSampler.html#isSampled(java.lang.String,boolean)"><code>apply sampling</code></a>, and <a href="https://github.com/openzipkin/zipkin/zipkin-tests/apidocs/zipkin2/storage/SpanConsumer.html?is-external=true#accept(java.util.List)" title="class or interface in zipkin2.storage" class="externalLink"><code>queues them for storage</code></a>.

 <p>Callbacks on this type are invoked by zipkin collectors to improve the visibility of the
 system. A typical implementation will report metrics to a telemetry system for analysis and
 reporting.

 <h3>Spans Collected vs Queryable Spans</h3>

 <p>A span queried may be comprised of multiple spans collected. While instrumentation should
 report complete spans, Instrumentation often patch the same span twice, ex adding annotations.
 Also, RPC spans include at least 2 messages due to the client and the server reporting
 separately. Finally, some storage components merge patches at ingest. For these reasons, you
 should be cautious to alert on queryable spans vs stored spans, unless you control the
 instrumentation in such a way that queryable spans/message is reliable.

 <h3>Key Relationships</h3>

 <p>The following relationships can be used to consider health of the tracing system.

 <pre>
 <ul>
 <li>Successful Messages = <a href="#incrementMessages()"><code>Accepted messages</code></a> -
 <a href="#incrementMessagesDropped()"><code>Dropped messages</code></a>. Alert when this is less than amount of
 messages sent from instrumentation.</li>
 <li>Stored spans &lt;= <a href="#incrementSpans(int)"><code>Accepted spans</code></a> - <a href="#incrementSpansDropped(int)"><code>Dropped spans</code></a>. Alert when this drops below the
 <code>collection-tier sample rate</code>.
 </li>
 </ul>
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="CollectorMetrics.html" title="interface in zipkin2.collector">CollectorMetrics</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#NOOP_METRICS">NOOP_METRICS</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="CollectorMetrics.html" title="interface in zipkin2.collector">CollectorMetrics</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#forTransport(java.lang.String)">forTransport</a></span>&#8203;(java.lang.String&nbsp;transportType)</code></th>
<td class="colLast">
<div class="block">Those who wish to partition metrics by transport can call this method to include the transport
 type in the backend metric key.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#incrementBytes(int)">incrementBytes</a></span>&#8203;(int&nbsp;quantity)</code></th>
<td class="colLast">
<div class="block">Increments the number of bytes containing serialized spans in a message.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#incrementMessages()">incrementMessages</a></span>()</code></th>
<td class="colLast">
<div class="block">Increments count of messages received, which contain 0 or more spans.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#incrementMessagesDropped()">incrementMessagesDropped</a></span>()</code></th>
<td class="colLast">
<div class="block">Increments count of messages that could not be read.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#incrementSpans(int)">incrementSpans</a></span>&#8203;(int&nbsp;quantity)</code></th>
<td class="colLast">
<div class="block">Increments the count of spans read from a successful message.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#incrementSpansDropped(int)">incrementSpansDropped</a></span>&#8203;(int&nbsp;quantity)</code></th>
<td class="colLast">
<div class="block">Increments the count of spans dropped for any reason.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="NOOP_METRICS">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>NOOP_METRICS</h4>
<pre>static final&nbsp;<a href="CollectorMetrics.html" title="interface in zipkin2.collector">CollectorMetrics</a> NOOP_METRICS</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="forTransport(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forTransport</h4>
<pre class="methodSignature"><a href="CollectorMetrics.html" title="interface in zipkin2.collector">CollectorMetrics</a>&nbsp;forTransport&#8203;(java.lang.String&nbsp;transportType)</pre>
<div class="block">Those who wish to partition metrics by transport can call this method to include the transport
 type in the backend metric key.

 <p>For example, an implementation may by default report <a href="#incrementSpans(int)"><code>incremented
 spans</code></a> to the key "zipkin.collector.span.accepted". When <code>metrics.forTransport("kafka"</code>
 is called, the counter would report to "zipkin.collector.kafka.span.accepted"</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>transportType</code> - ex "http", "rabbitmq", "kafka"</dd>
</dl>
</li>
</ul>
<a id="incrementMessages()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>incrementMessages</h4>
<pre class="methodSignature">void&nbsp;incrementMessages()</pre>
<div class="block">Increments count of messages received, which contain 0 or more spans. Ex POST requests or Kafka
 messages consumed.</div>
</li>
</ul>
<a id="incrementMessagesDropped()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>incrementMessagesDropped</h4>
<pre class="methodSignature">void&nbsp;incrementMessagesDropped()</pre>
<div class="block">Increments count of messages that could not be read. Ex malformed content, or peer disconnect.</div>
</li>
</ul>
<a id="incrementSpans(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>incrementSpans</h4>
<pre class="methodSignature">void&nbsp;incrementSpans&#8203;(int&nbsp;quantity)</pre>
<div class="block">Increments the count of spans read from a successful message. When bundling is used, accepted
 spans will be a larger number than successful messages.</div>
</li>
</ul>
<a id="incrementBytes(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>incrementBytes</h4>
<pre class="methodSignature">void&nbsp;incrementBytes&#8203;(int&nbsp;quantity)</pre>
<div class="block">Increments the number of bytes containing serialized spans in a message.

 <p>Note: this count should relate to the raw data structures, like json or thrift, and discount
 compression, enveloping, etc.</div>
</li>
</ul>
<a id="incrementSpansDropped(int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>incrementSpansDropped</h4>
<pre class="methodSignature">void&nbsp;incrementSpansDropped&#8203;(int&nbsp;quantity)</pre>
<div class="block">Increments the count of spans dropped for any reason. For example, failure queueing to storage
 or sampling decisions.</div>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CollectorMetrics.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2015&#x2013;2019 <a href="http://zipkin.io/">OpenZipkin</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
